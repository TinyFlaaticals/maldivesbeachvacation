<%= form_with(model: [:admin, property], data: { controller: "rails-nested-form" , rails_nested_form_wrapper_selector: '.nested-form-wrapper'}) do |form| %>
  <div class="space-y-12">
    <div class="border-b border-gray-900/10 pb-12">
      <h2 class="text-base/7 font-semibold text-gray-900">Property Details</h2>
      <p class="mt-1 text-sm/6 text-gray-600">This information will be displayed publicly so be careful what you share.</p>
      <% if property.errors.any? %>
        <div class="mt-2 text-sm text-red-600">
          <%= property.errors.full_messages.join(', ') %>
        </div>
      <% end %>
      <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
        <div class="sm:col-span-4">
          <%= form.label :name, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_field :name, 
                class: "block w-full max-w-lg rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:name].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:name].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:name].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="sm:col-span-4">
          <%= form.label :address, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_field :address,
                class: "block w-full max-w-lg rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:address].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:address].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:address].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="sm:col-span-4">
          <%= form.label :tagline, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_field :tagline,
                class: "block w-full max-w-lg rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:tagline].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:tagline].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:tagline].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="col-span-full">
          <%= form.label :short_description, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_area :short_description,
                rows: 3,
                class: "block w-full max-w-2xl rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:short_description].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:short_description].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:short_description].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :latitude, "Latitude (format: 37.7749)", class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_field :latitude,
                class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:latitude].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:latitude].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:latitude].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :longitude, "Longitude (format: -122.4194)", class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_field :longitude,
                class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:longitude].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:longitude].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:longitude].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :normal_price, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_field :normal_price,
                class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:normal_price].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:normal_price].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:normal_price].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :discounted_price, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_field :discounted_price,
                class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:discounted_price].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:discounted_price].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:discounted_price].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :discount_percent, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.number_field :discount_percent,
                class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:discount_percent].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:discount_percent].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:discount_percent].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <br>
        <div class="col-span-full lg:col-span-3">
          <%= form.label :discount_text, "Discount text", class: "block text-sm/6 font-medium text-gray-900" %> <span class="text-xs text-gray-500">(ex: Receive 30% discount on a restaurant)</span>
          <div class="mt-2">
            <%= form.text_field :discount_text,
                class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:discount_text].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:discount_text].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:discount_text].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="col-span-full lg:col-span-3">
          <%= form.label :offer_text, "Offer", class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.text_field :offer_text,
                class: "block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 #{property.errors[:offer_text].any? ? 'outline-red-500' : 'outline-gray-300'} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" %>
            <% if property.errors[:offer_text].any? %>
              <p class="mt-2 text-sm text-red-600"><%= property.errors[:offer_text].join(', ') %></p>
            <% end %>
          </div>
        </div>
        <div class="col-span-full">
          <%= form.label :facilities, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2 space-y-3">
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3">
              <%= form.collection_check_boxes :facility_ids, Facility.all, :id, :name do |b| %>
                <div class="relative flex items-start">
                  <div class="flex h-6 items-center">
                    <%= b.check_box class: "h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600" %>
                  </div>
                  <div class="ml-3 text-sm leading-6">
                    <%= b.label class: "font-medium text-gray-900" %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        <div class="col-span-full">
          <%= form.label :activities, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2 space-y-3">
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3">
              <%= form.collection_check_boxes :activity_ids, Activity.all, :id, :name do |b| %>
                <div class="relative flex items-start">
                  <div class="flex h-6 items-center">
                    <%= b.check_box class: "h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600" %>
                  </div>
                  <div class="ml-3 text-sm leading-6">
                    <%= b.label class: "font-medium text-gray-900" %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        <div class="col-span-full">
          <%= form.label :popular_filters, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2 space-y-3">
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3">
              <%= form.collection_check_boxes :popular_filter_ids, PopularFilter.all, :id, :name do |b| %>
                <div class="relative flex items-start">
                  <div class="flex h-6 items-center">
                    <%= b.check_box class: "h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600" %>
                  </div>
                  <div class="ml-3 text-sm leading-6">
                    <%= b.label class: "font-medium text-gray-900" %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        <div class="col-span-full">
          <div class="mb-4">
            <button type="button" data-action="rails-nested-form#add" class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
              <svg class="-ml-1 mr-2 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
              Add image
            </button>
          </div>
          <template data-rails-nested-form-target="template">
            <%= form.fields_for :property_images, PropertyImage.new, child_index: 'NEW_RECORD' do |property_image_fields| %>
              <%= render "property_image_form", f: property_image_fields %>
            <% end %>
          </template>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <%= form.fields_for :property_images do |property_image_fields| %>
              <%= render "property_image_form", f: property_image_fields %>
            <% end %>
            <!-- Inserted elements will be injected before that target. -->
            <div data-rails-nested-form-target="target"></div>
          </div>
        </div>
        <div class="col-span-full">
          <%= form.label :overview, class: "block text-sm/6 font-medium text-gray-900" %>
          <div class="mt-2">
            <%= form.rich_text_area :overview %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-6 flex items-center justify-end gap-x-6">
    <%= link_to "Cancel", admin_properties_path, class: "text-sm/6 font-semibold text-gray-900" %>
    <%= form.submit class: "rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" %>
  </div>
<% end %>